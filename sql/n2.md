# Ejercicios SQL - Filtrado de Datos con WHERE

Este conjunto de ejercicios está diseñado para practicar el filtrado de datos usando la tabla `customers`. Todos los ejercicios se pueden resolver con los conocimientos adquiridos en la unidad.

---

## Estructura de la tabla `customers`

La tabla `customers` contiene la siguiente información de clientes:

| Columna | Descripción |
|---------|-------------|
| `customerNumber` | Identificador único del cliente |
| `customerName` | Nombre de la empresa del cliente |
| `contactLastName` | Apellido del contacto principal |
| `contactFirstName` | Nombre del contacto principal |
| `phone` | Teléfono de contacto |
| `addressLine1` | Primera línea de dirección |
| `addressLine2` | Segunda línea de dirección |
| `city` | Ciudad |
| `state` | Estado/Provincia |
| `postalCode` | Código postal |
| `country` | País |
| `salesRepEmployeeNumber` | Número de empleado del representante de ventas |
| `creditLimit` | Límite de crédito |

---

## Ejercicio 1: Introducción a WHERE - Un país específico

**Enunciado:**
Escribe una consulta que muestre todos los datos de los clientes que están en el país "USA".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT * FROM customers WHERE country = 'USA';
```

**Explicación:**
La cláusula `WHERE` se utiliza para filtrar resultados. En este caso, filtramos por el país. El operador `=` significa "igual a", y el valor de texto se escribe entre comillas simples.

</details>

---

## Ejercicio 2: Filtrar por número de cliente

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) para el cliente con número 103.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE customerNumber = 103;
```

**Explicación:**
Aquí filtramos por `customerNumber`, que es un valor numérico. No se usan comillas para números en SQL. El operador `=` funciona de la misma manera para números y texto.

</details>

---

## Ejercicio 3: Filtrar por ciudad

**Enunciado:**
Crea una consulta que muestre el nombre de la empresa (`customerName`), la ciudad (`city`) y el teléfono (`phone`) de todos los clientes de la ciudad de "Paris".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, phone FROM customers WHERE city = 'Paris';
```

**Explicación:**
Los valores de texto en la cláusula `WHERE` deben ir entre comillas simples. SQL es sensible a mayúsculas y minúsculas en los valores de texto, aunque esto depende de la configuración de la base de datos.

</details>

---

## Ejercicio 4: Filtrar clientes con crédito mayor a un valor

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y su límite de crédito (`creditLimit`) para todos los clientes cuyo límite de crédito sea mayor a 50000.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers WHERE creditLimit > 50000;
```

**Explicación:**
El operador `>` significa "mayor que". Otros operadores de comparación incluyen `<` (menor que), `>=` (mayor o igual), `<=` (menor o igual), y `<>` (diferente de).

</details>

---

## Ejercicio 5: Filtrar clientes con crédito menor a un valor

**Enunciado:**
Crea una consulta que muestre el número de cliente (`customerNumber`), nombre (`customerName`) y crédito (`creditLimit`) de todos los clientes cuyo límite de crédito sea menor a 25000.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerNumber, customerName, creditLimit FROM customers WHERE creditLimit < 25000;
```

**Explicación:**
El operador `<` significa "menor que". Sirve para filtrar valores numéricos que no alcanzan cierto umbral.

</details>

---

## Ejercicio 6: Operador AND - Dos condiciones

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`), la ciudad (`city`) y el país (`country`) de clientes que estén en "España" Y en la ciudad de "Madrid".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, country FROM customers WHERE country = 'Spain' AND city = 'Madrid';
```

**Explicación:**
El operador lógico `AND` se utiliza cuando necesitamos que se cumplan DOS O MÁS condiciones simultáneamente. Solo se mostrarán filas donde AMBAS condiciones sean verdaderas.

</details>

---

## Ejercicio 7: Operador OR - Una de dos condiciones

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que estén en "USA" O en "Canada".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country = 'USA' OR country = 'Canada';
```

**Explicación:**
El operador lógico `OR` se utiliza cuando queremos registros que cumplan al menos UNA de varias condiciones. Si se cumple cualquiera de las condiciones, la fila se mostrará en los resultados.

</details>

---

## Ejercicio 8: Combinación de AND y OR

**Enunciado:**
Escribe una consulta que muestre el nombre (`customerName`), ciudad (`city`) y crédito (`creditLimit`) de clientes que estén en "USA" Y tengan un crédito mayor a 50000, O estén en "France".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, creditLimit FROM customers 
WHERE (country = 'USA' AND creditLimit > 50000) OR country = 'France';
```

**Explicación:**
Cuando combinamos `AND` y `OR`, es importante usar paréntesis para dejar clara la lógica. En este caso: (condición1 AND condición2) OR condición3. Los paréntesis aseguran que se evalúen en el orden correcto.

</details>

---

## Ejercicio 9: Operador NOT EQUAL (<>)

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de todos los clientes que NO estén en "USA".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country <> 'USA';
```

**Explicación:**
El operador `<>` significa "diferente de" o "no igual a". También puedes usar `!=` en algunos sistemas, pero `<>` es el estándar SQL. Esta consulta muestra todos los clientes excepto los de USA.

</details>

---

## Ejercicio 10: Operador IN - Múltiples valores

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que estén en "USA", "Canada" o "Mexico".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country IN ('USA', 'Canada', 'Mexico');
```

**Explicación:**
El operador `IN` es una forma más compacta y legible de escribir múltiples condiciones `OR`. La sintaxis es: `WHERE columna IN (valor1, valor2, valor3, ...)`. Es especialmente útil cuando tienes muchos valores a comparar.

</details>

---

## Ejercicio 11: Operador IN con números

**Enunciado:**
Crea una consulta que muestre el nombre (`customerName`) y el número de cliente (`customerNumber`) de los clientes cuyo número sea 103, 112 o 125.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, customerNumber FROM customers WHERE customerNumber IN (103, 112, 125);
```

**Explicación:**
El operador `IN` funciona tanto con valores de texto como con números. Para números, no se usan comillas. Esta consulta es equivalente a escribir `WHERE customerNumber = 103 OR customerNumber = 112 OR customerNumber = 125`, pero es mucho más clara.

</details>

---

## Ejercicio 12: Operador LIKE con comodín %

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) de todos los clientes cuyo nombre contiene la palabra "Toys".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName FROM customers WHERE customerName LIKE '%Toys%';
```

**Explicación:**
El operador `LIKE` se utiliza para búsquedas de patrones de texto. El símbolo `%` es un comodín que representa cualquier número de caracteres (incluyendo cero caracteres). Así, `'%Toys%'` significa: "cualquier cosa, seguida de 'Toys', seguida de cualquier cosa".

</details>

---

## Ejercicio 13: LIKE - Coincidencia al inicio

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) de todos los clientes cuyo nombre comienza con "Mini".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName FROM customers WHERE customerName LIKE 'Mini%';
```

**Explicación:**
Cuando colocamos `%` solo al final (`'Mini%'`), buscamos valores que COMIENZAN con "Mini". El comodín `%` al final permite cualquier cantidad de caracteres después de "Mini".

</details>

---

## Ejercicio 14: LIKE - Coincidencia al final

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) de todos los clientes cuyo nombre termina con "Ltd".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName FROM customers WHERE customerName LIKE '%Ltd';
```

**Explicación:**
Cuando colocamos `%` solo al inicio (`'%Ltd'`), buscamos valores que TERMINAN con "Ltd". El comodín `%` al inicio permite cualquier cantidad de caracteres antes de "Ltd".

</details>

---

## Ejercicio 15: LIKE con patrón específico

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) de todos los clientes cuyo apellido de contacto (`contactLastName`) comienza con la letra "S".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName FROM customers WHERE contactLastName LIKE 'S%';
```

**Explicación:**
Este patrón busca cualquier valor que comience con "S" seguido de cualquier número de caracteres. Es útil cuando queremos filtrar por la primera letra de un campo.

</details>

---

## Ejercicio 16: WHERE con múltiples condiciones AND

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`), ciudad (`city`) y crédito (`creditLimit`) de clientes que estén en "Germany", en la ciudad de "Cologne" Y tengan un crédito mayor a 30000.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, creditLimit FROM customers 
WHERE country = 'Germany' AND city = 'Cologne' AND creditLimit > 30000;
```

**Explicación:**
Podemos encadenar múltiples condiciones `AND`. Todas las condiciones deben ser verdaderas para que la fila se incluya en los resultados. En este caso, hay que cumplir con los tres filtros simultáneamente.

</details>

---

## Ejercicio 17: Combinación de IN y AND

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el crédito (`creditLimit`) de clientes que estén en "USA" o "Canada" Y tengan un crédito mayor a 60000.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers 
WHERE country IN ('USA', 'Canada') AND creditLimit > 60000;
```

**Explicación:**
Combinamos el operador `IN` con `AND`. Primero, el sistema evalúa si el país está en la lista ('USA' o 'Canada'), y luego verifica si el crédito es mayor a 60000. Ambas condiciones deben cumplirse.

</details>

---

## Ejercicio 18: LIKE con AND

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes cuyo nombre contiene "Auto" Y están en "USA".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers 
WHERE customerName LIKE '%Auto%' AND country = 'USA';
```

**Explicación:**
Combinamos el operador `LIKE` con `AND`. La consulta busca registros que cumplan ambas condiciones: que el nombre contenga "Auto" Y que estén en USA.

</details>

---

## Ejercicio 19: Limitar resultados con LIMIT

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de los primeros 5 clientes de la tabla.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers LIMIT 5;
```

**Explicación:**
La cláusula `LIMIT` se utiliza para restringir el número de filas devueltas. `LIMIT 5` significa "devuelve solo los primeros 5 registros". Esto es útil cuando tenemos muchos datos y queremos ver solo una muestra.

</details>

---

## Ejercicio 20: LIMIT con WHERE

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el crédito (`creditLimit`) de los primeros 3 clientes cuyo límite de crédito sea mayor a 100000.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers WHERE creditLimit > 100000 LIMIT 3;
```

**Explicación:**
Combinamos `WHERE` y `LIMIT`. Primero, SQL filtra los registros que cumplen la condición (crédito > 100000), y luego limita los resultados a solo los primeros 3 registros.

</details>

---

## Ejercicio 21: Orden de las cláusulas

**Enunciado:**
¿Cuál es el orden correcto de las cláusulas en una consulta SQL? Ordena estas cláusulas:

1. `LIMIT 10`
2. `WHERE country = 'USA'`
3. `SELECT customerName, country`
4. `FROM customers`

<details>
<summary><b>Ver solución</b></summary>

**Respuesta:**
El orden correcto es:

1. `SELECT customerName, country`
2. `FROM customers`
3. `WHERE country = 'USA'`
4. `LIMIT 10`

**Consulta completa:**
```sql
SELECT customerName, country FROM customers WHERE country = 'USA' LIMIT 10;
```

**Explicación:**
El orden de las cláusulas en SQL es:
1. `SELECT` - Qué columnas mostrar
2. `FROM` - De qué tabla obtener los datos
3. `WHERE` - Qué registros filtrar
4. `LIMIT` - Cuántos registros mostrar

Este es el orden de escritura. SQL procesa la consulta de manera diferente internamente (primero FROM, luego WHERE, luego SELECT, finalmente LIMIT), pero en el código siempre escribimos en este orden.

</details>

---

## Ejercicio 22: Filtrar países que NO contienen una palabra

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) de clientes cuyo nombre NO contenga "Ltd".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName FROM customers WHERE customerName NOT LIKE '%Ltd%';
```

**Explicación:**
El operador `NOT LIKE` es la negación de `LIKE`. Devuelve registros que NO coinciden con el patrón especificado. En este caso, muestra todos los clientes cuyo nombre no contiene "Ltd".

</details>

---

## Ejercicio 23: Operador NOT con IN

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que NO estén en "USA", "Canada" ni "Mexico".

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country NOT IN ('USA', 'Canada', 'Mexico');
```

**Explicación:**
El operador `NOT IN` es la negación de `IN`. Devuelve registros que NO coinciden con ninguno de los valores en la lista. En este caso, muestra clientes de todos los países excepto esos tres.

</details>

---

## Ejercicio 24: Combinación compleja de condiciones

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`), ciudad (`city`) y crédito (`creditLimit`) de clientes que:
- Estén en "USA" o "France"
- Y tengan un crédito mayor a 50000
- Limite los resultados a 5

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, creditLimit FROM customers 
WHERE (country = 'USA' OR country = 'France') AND creditLimit > 50000 
LIMIT 5;
```

**Explicación:**
Esta consulta combina múltiples operadores lógicos. Los paréntesis alrededor de la condición `OR` aseguran que se evalúe correctamente antes de aplicar el `AND`. Luego, limitamos los resultados a 5 registros. El orden es importante: SELECT -> FROM -> WHERE -> LIMIT.

</details>

---

## Ejercicio 25: Práctica integral - Búsqueda de clientes específicos

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`), el representante de ventas (`salesRepEmployeeNumber`) y el crédito (`creditLimit`) de clientes que cumplan con:
- El nombre comienza con "A" o contiene "Auto"
- Y están en "USA" o "Germany"
- Y tienen un crédito entre 50000 y 100000

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, salesRepEmployeeNumber, creditLimit FROM customers 
WHERE (customerName LIKE 'A%' OR customerName LIKE '%Auto%') 
AND country IN ('USA', 'Germany') 
AND creditLimit >= 50000 
AND creditLimit <= 100000;
```

**Explicación:**
Esta es una consulta más compleja que combina varios conceptos:
- `LIKE` para búsquedas de patrones
- `OR` para alternativas en el nombre
- `IN` para múltiples países
- Múltiples condiciones `AND`
- Comparadores `>=` y `<=` para rango de crédito

Los paréntesis alrededor de las condiciones `LIKE` aseguran la evaluación correcta.

</details>

---

## Consejos para evitar errores comunes

### Error 1: Olvidar comillas en valores de texto
❌ **Incorrecto:**
```sql
SELECT customerName FROM customers WHERE country = USA;
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers WHERE country = 'USA';
```

### Error 2: Usar comillas en números
❌ **Incorrecto:**
```sql
SELECT customerName FROM customers WHERE creditLimit > '50000';
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers WHERE creditLimit > 50000;
```

### Error 3: Confundir LIKE con =
❌ **Incorrecto (si quieres una búsqueda aproximada):**
```sql
SELECT customerName FROM customers WHERE customerName = '%Auto%';
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers WHERE customerName LIKE '%Auto%';
```

### Error 4: Olvidar paréntesis en condiciones complejas
❌ **Incorrecto (ambiguo):**
```sql
SELECT customerName FROM customers WHERE country = 'USA' AND creditLimit > 50000 OR city = 'Paris';
```

✅ **Correcto (claro):**
```sql
SELECT customerName FROM customers WHERE (country = 'USA' AND creditLimit > 50000) OR city = 'Paris';
```

### Error 5: Orden incorrecto de las cláusulas
❌ **Incorrecto:**
```sql
SELECT customerName LIMIT 5 FROM customers WHERE country = 'USA';
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers WHERE country = 'USA' LIMIT 5;
```

---

## Resumen de conceptos

| Concepto | Descripción | Ejemplo |
|----------|-------------|---------|
| **WHERE** | Filtra filas según condiciones | `WHERE country = 'USA'` |
| **=** | Igual a | `WHERE creditLimit = 50000` |
| **<>** | Diferente de | `WHERE country <> 'USA'` |
| **>** | Mayor que | `WHERE creditLimit > 50000` |
| **<** | Menor que | `WHERE creditLimit < 25000` |
| **>=** | Mayor o igual | `WHERE creditLimit >= 50000` |
| **<=** | Menor o igual | `WHERE creditLimit <= 100000` |
| **AND** | Ambas condiciones deben cumplirse | `WHERE country = 'USA' AND city = 'New York'` |
| **OR** | Al menos una condición debe cumplirse | `WHERE country = 'USA' OR country = 'Canada'` |
| **IN** | Valor en una lista | `WHERE country IN ('USA', 'Canada')` |
| **NOT IN** | Valor no en una lista | `WHERE country NOT IN ('USA', 'Canada')` |
| **LIKE** | Búsqueda de patrón | `WHERE customerName LIKE '%Toys%'` |
| **NOT LIKE** | No coincide con patrón | `WHERE customerName NOT LIKE '%Ltd'` |
| **%** | Comodín (cualquier carácter) | Usado con LIKE |
| **LIMIT** | Limita número de resultados | `LIMIT 10` |

---

## Tabla de operadores LIKE

| Patrón | Descripción | Ejemplo |
|--------|-------------|---------|
| `'Auto%'` | Comienza con "Auto" | `LIKE 'Auto%'` coincide con "Auto Parts" |
| `'%Ltd'` | Termina con "Ltd" | `LIKE '%Ltd'` coincide con "Acme Ltd" |
| `'%Auto%'` | Contiene "Auto" | `LIKE '%Auto%'` coincide con "Blue Auto Shop" |
| `'A_to'` | A, cualquier carácter, "to" | `LIKE 'A_to'` coincide con "Auto" pero no "Aato" |

---

## ¿Necesitas más ayuda?

Si tienes dudas sobre algún ejercicio o necesitas más práctica, recuerda:
- Revisa la estructura de la cláusula WHERE
- Practica con un operador a la vez antes de combinarlos
- Usa paréntesis para claridad en condiciones complejas
- Ten cuidado con las comillas en valores de texto
- Recuerda que LIMIT siempre va al final de la consulta
