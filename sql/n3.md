# Ejercicios SQL - Ordenar Resultados con ORDER BY

Este conjunto de ejercicios está diseñado para practicar la ordenación de datos usando la tabla `customers`. Todos los ejercicios se pueden resolver con los conocimientos adquiridos en la unidad.

---

## Estructura de la tabla `customers`

La tabla `customers` contiene la siguiente información de clientes:

| Columna | Descripción |
|---------|-------------|
| `customerNumber` | Identificador único del cliente |
| `customerName` | Nombre de la empresa del cliente |
| `contactLastName` | Apellido del contacto principal |
| `contactFirstName` | Nombre del contacto principal |
| `phone` | Teléfono de contacto |
| `addressLine1` | Primera línea de dirección |
| `addressLine2` | Segunda línea de dirección |
| `city` | Ciudad |
| `state` | Estado/Provincia |
| `postalCode` | Código postal |
| `country` | País |
| `salesRepEmployeeNumber` | Número de empleado del representante de ventas |
| `creditLimit` | Límite de crédito |

---

## Ejercicio 1: Ordenar alfabéticamente de forma ascendente

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`), ordenados alfabéticamente por nombre de cliente de forma ascendente (A a Z).

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers ORDER BY customerName ASC;
```

**Explicación:**
La cláusula `ORDER BY` se utiliza para ordenar los resultados. `ASC` significa "ascendente" (de A a Z para texto, de menor a mayor para números). Es el ordenamiento por defecto, por lo que `ASC` es opcional.

</details>

---

## Ejercicio 2: Orden ascendente sin especificar ASC

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y la ciudad (`city`), ordenados por ciudad de forma ascendente. NO uses la palabra `ASC`.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city FROM customers ORDER BY city;
```

**Explicación:**
Cuando no especificamos `ASC` o `DESC`, SQL asume que queremos orden ascendente por defecto. Por lo tanto, esta consulta es equivalente a escribir `ORDER BY city ASC`.

</details>

---

## Ejercicio 3: Ordenar números de forma ascendente

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el límite de crédito (`creditLimit`), ordenados por crédito de menor a mayor.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers ORDER BY creditLimit;
```

**Explicación:**
El operador `ORDER BY` funciona con números de la misma manera que con texto. Los números se ordenan de menor a mayor en orden ascendente. No es necesario escribir `ASC` ya que es el comportamiento por defecto.

</details>

---

## Ejercicio 4: Ordenar de forma descendente

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el límite de crédito (`creditLimit`), ordenados por crédito de mayor a menor.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers ORDER BY creditLimit DESC;
```

**Explicación:**
La palabra clave `DESC` significa "descendente" (de Z a A para texto, de mayor a menor para números). En este caso, los clientes con mayor crédito aparecerán primero.

</details>

---

## Ejercicio 5: Ordenar alfabéticamente descendente

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`), ordenados por país de forma descendente (Z a A).

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers ORDER BY country DESC;
```

**Explicación:**
Con `DESC`, los resultados se ordenan en sentido inverso. Para texto, significa de Z hacia A. Los países que comienzan con letras cercanas a Z aparecerán primero.

</details>

---

## Ejercicio 6: Ordenar por ciudad ascendente con alias

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente con alias "Empresa" (`customerName`) y la ciudad (`city`), ordenados por ciudad de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName AS "Empresa", city FROM customers ORDER BY city ASC;
```

**Explicación:**
Los alias no afectan al ordenamiento. Podemos usar `ORDER BY` con el nombre original de la columna, aunque hayamos usado un alias en el `SELECT`. Algunos sistemas también permiten ordenar por el alias, pero es más seguro usar el nombre original.

</details>

---

## Ejercicio 7: Ordenar por segunda columna mostrada

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el teléfono (`phone`), ordenados por teléfono de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, phone FROM customers ORDER BY phone;
```

**Explicación:**
Podemos ordenar por cualquier columna de la tabla, sin importar si es la primera o la última en el `SELECT`. En este caso, ordenamos por `phone` aunque aparezca como segunda columna.

</details>

---

## Ejercicio 8: Ordenar varias columnas a la vez - Primera

**Enunciado:**
Escribe una consulta que muestre el país (`country`), la ciudad (`city`) y el nombre del cliente (`customerName`), ordenados primero por país ascendente y luego por ciudad ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT country, city, customerName FROM customers ORDER BY country ASC, city ASC;
```

**Explicación:**
Cuando usamos múltiples columnas en `ORDER BY`, SQL ordena primero por la primera columna especificada. Cuando hay empates en la primera columna, ordena por la segunda columna. Los países se agruparán juntos, y dentro de cada país, las ciudades estarán ordenadas alfabéticamente.

</details>

---

## Ejercicio 9: Ordenar varias columnas sin especificar ASC

**Enunciado:**
Crea una consulta que muestre el país (`country`) y el nombre del cliente (`customerName`), ordenados primero por país y luego por nombre de cliente (ambos ascendentes). NO escribas ASC.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT country, customerName FROM customers ORDER BY country, customerName;
```

**Explicación:**
Cuando no especificamos `ASC` o `DESC`, se asume orden ascendente para todas las columnas. Esta consulta es equivalente a escribir `ORDER BY country ASC, customerName ASC`.

</details>

---

## Ejercicio 10: Ordenamientos diferentes en cada columna

**Enunciado:**
Escribe una consulta que muestre el país (`country`) y el crédito límite (`creditLimit`), ordenados primero por país de forma ascendente (A a Z), y luego por crédito de forma descendente (mayor a menor).

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT country, creditLimit FROM customers ORDER BY country ASC, creditLimit DESC;
```

**Explicación:**
Cada columna en `ORDER BY` puede tener su propio ordenamiento ascendente o descendente. En este caso, los países se ordenan de A a Z, pero dentro de cada país, los créditos aparecen de mayor a menor.

</details>

---

## Ejercicio 11: Tres columnas con diferentes ordenamientos

**Enunciado:**
Crea una consulta que muestre el país (`country`), la ciudad (`city`) y el nombre del cliente (`customerName`), ordenados por:
1. País ascendente
2. Ciudad descendente
3. Nombre ascendente

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT country, city, customerName FROM customers ORDER BY country ASC, city DESC, customerName ASC;
```

**Explicación:**
SQL permite especificar hasta múltiples niveles de ordenamiento. Primero agrupa por país (A a Z), luego dentro de cada país ordena las ciudades de Z a A, y finalmente dentro de cada ciudad ordena los nombres de A a Z.

</details>

---

## Ejercicio 12: ORDER BY con WHERE

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que están en "USA", ordenados por nombre de cliente de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country = 'USA' ORDER BY customerName;
```

**Explicación:**
`ORDER BY` se coloca DESPUÉS de `WHERE`. Primero filtramos los datos (solo clientes de USA), y luego ordenamos los resultados filtrados. El orden de las cláusulas es siempre: SELECT -> FROM -> WHERE -> ORDER BY.

</details>

---

## Ejercicio 13: ORDER BY con WHERE y múltiples columnas

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`), la ciudad (`city`) y el crédito (`creditLimit`) de clientes cuyo crédito sea mayor a 50000, ordenados primero por ciudad ascendente y luego por crédito descendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, creditLimit FROM customers WHERE creditLimit > 50000 ORDER BY city ASC, creditLimit DESC;
```

**Explicación:**
Combinamos `WHERE` con `ORDER BY` con múltiples columnas. La consulta filtra solo clientes con alto crédito y luego los ordena por ciudad y crédito dentro de esa ciudad.

</details>

---

## Ejercicio 14: ORDER BY con IN y un ordenamiento

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que están en "Spain", "France" o "Germany", ordenados por nombre de cliente de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country IN ('Spain', 'France', 'Germany') ORDER BY customerName;
```

**Explicación:**
Combinamos el operador `IN` con `ORDER BY`. Primero filtramos los clientes de esos tres países, luego ordenamos el resultado alfabéticamente por nombre.

</details>

---

## Ejercicio 15: ORDER BY con LIKE

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el teléfono (`phone`) de clientes cuyo nombre comienza con "Mini", ordenados por teléfono de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, phone FROM customers WHERE customerName LIKE 'Mini%' ORDER BY phone;
```

**Explicación:**
Combinamos `LIKE` con `ORDER BY`. Primero filtramos los clientes cuyo nombre comienza con "Mini", y luego ordenamos los resultados por teléfono.

</details>

---

## Ejercicio 16: ORDER BY descendente con WHERE y LIMIT

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el crédito (`creditLimit`) de clientes que están en "USA", ordenados por crédito de mayor a menor, mostrando solo los primeros 5.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers WHERE country = 'USA' ORDER BY creditLimit DESC LIMIT 5;
```

**Explicación:**
Combinamos `WHERE`, `ORDER BY` y `LIMIT`. El orden es crucial: SELECT -> FROM -> WHERE -> ORDER BY -> LIMIT. Primero filtramos por país, luego ordenamos por crédito descendente, y finalmente limitamos a 5 resultados.

</details>

---

## Ejercicio 17: Orden ascendente con ciudad específica

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el estado (`state`) de clientes en la ciudad de "New York", ordenados por nombre de cliente de forma ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, state FROM customers WHERE city = 'New York' ORDER BY customerName;
```

**Explicación:**
Filtramos por ciudad específica y luego ordenamos alfabéticamente. Esta es una consulta sencilla que combina filtrado básico con ordenamiento.

</details>

---

## Ejercicio 18: Orden descendente con rango numérico

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el crédito (`creditLimit`) de clientes con crédito entre 30000 y 70000 (inclusive), ordenados por crédito de mayor a menor.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers WHERE creditLimit >= 30000 AND creditLimit <= 70000 ORDER BY creditLimit DESC;
```

**Explicación:**
Filtramos un rango de créditos usando dos condiciones `AND` y luego ordenamos descendentemente. Los clientes con mayor crédito dentro de ese rango aparecerán primero.

</details>

---

## Ejercicio 19: Múltiples ordenamientos con filtro complejo

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`), el país (`country`) y el crédito (`creditLimit`) de clientes que:
- Están en "USA" o "Canada"
- Y tienen un crédito mayor a 40000
Ordena por país ascendente y luego por crédito descendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country, creditLimit FROM customers WHERE country IN ('USA', 'Canada') AND creditLimit > 40000 ORDER BY country ASC, creditLimit DESC;
```

**Explicación:**
Esta consulta combina `IN` con `AND` para filtrado, y luego usa múltiples ordenamientos. Los resultados se agruparán por país (USA primero, luego Canada) y dentro de cada país estarán ordenados por crédito de mayor a menor.

</details>

---

## Ejercicio 20: ORDER BY con NOT y filtro

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`) y el país (`country`) de clientes que NO estén en "USA", ordenados por país de forma ascendente, mostrando solo los primeros 10.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country FROM customers WHERE country <> 'USA' ORDER BY country ASC LIMIT 10;
```

**Explicación:**
Usamos el operador `<>` (diferente de) para excluir USA, ordenamos por país y limitamos a 10 resultados. Esta es una combinación de filtrado con negación, ordenamiento y limitación.

</details>

---

## Ejercicio 21: Ordenar por estado y después por ciudad

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`), el estado (`state`) y la ciudad (`city`), ordenados primero por estado ascendente y luego por ciudad ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, state, city FROM customers ORDER BY state ASC, city ASC;
```

**Explicación:**
Ordenamos por dos niveles geográficos. Los estados se agruparán, y dentro de cada estado, las ciudades estarán en orden alfabético.

</details>

---

## Ejercicio 22: Ordenar por apellido y luego por nombre

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`), apellido del contacto (`contactLastName`) y nombre del contacto (`contactFirstName`), ordenados por apellido ascendente y luego por nombre ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, contactLastName, contactFirstName FROM customers ORDER BY contactLastName ASC, contactFirstName ASC;
```

**Explicación:**
Ordenamos primero por apellido (agrupar contactos por apellido) y luego por nombre (dentro de cada apellido, ordenar por nombre). Es útil para búsquedas por apellido.

</details>

---

## Ejercicio 23: ORDER BY DESC con WHERE LIKE

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`) y el crédito (`creditLimit`) de clientes cuyo nombre termina con "Ltd", ordenados por crédito de mayor a menor.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, creditLimit FROM customers WHERE customerName LIKE '%Ltd' ORDER BY creditLimit DESC;
```

**Explicación:**
Filtramos clientes que terminan con "Ltd" usando `LIKE` y luego ordenamos por crédito descendente. Los clientes con mayor crédito dentro de ese grupo aparecerán primero.

</details>

---

## Ejercicio 24: Orden con múltiples filtros

**Enunciado:**
Escribe una consulta que muestre el nombre del cliente (`customerName`), la ciudad (`city`) y el crédito (`creditLimit`) de clientes que:
- Están en "Germany"
- Y tienen un crédito mayor a 25000
Ordena por ciudad ascendente y luego por crédito ascendente.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, city, creditLimit FROM customers WHERE country = 'Germany' AND creditLimit > 25000 ORDER BY city ASC, creditLimit ASC;
```

**Explicación:**
Combinamos múltiples filtros con múltiples ordenamientos. Primero filtramos por país y crédito, luego agrupamos por ciudad y ordenamos el crédito dentro de cada ciudad.

</details>

---

## Ejercicio 25: Práctica integral - Ordenamiento completo

**Enunciado:**
Crea una consulta que muestre el nombre del cliente (`customerName`), el país (`country`), la ciudad (`city`) y el crédito (`creditLimit`) de clientes que:
- NO estén en "USA"
- Y tengan un crédito mayor o igual a 50000
- Y el nombre contenga "Store" O comience con "B"
Ordena por país ascendente, luego por ciudad ascendente, y finalmente por crédito descendente. Muestra solo los primeros 10 resultados.

<details>
<summary><b>Ver solución</b></summary>

**Solución:**
```sql
SELECT customerName, country, city, creditLimit FROM customers WHERE country <> 'USA' AND creditLimit >= 50000 AND (customerName LIKE '%Store%' OR customerName LIKE 'B%') ORDER BY country ASC, city ASC, creditLimit DESC LIMIT 10;
```

**Nota:** Este ejercicio utiliza paréntesis para agrupar condiciones lógicas, lo cual está fuera del alcance actual. Una alternativa sin paréntesis sería usar `IN` o hacer una consulta más simple.

**Solución alternativa (sin paréntesis complejos):**
```sql
SELECT customerName, country, city, creditLimit FROM customers WHERE country <> 'USA' AND creditLimit >= 50000 ORDER BY country ASC, city ASC, creditLimit DESC LIMIT 10;
```

**Explicación:**
Esta versión alternativa es más sencilla y se ajusta mejor a los conceptos enseñados. Filtra por país diferente a USA y crédito alto, luego ordena por tres niveles (país, ciudad y crédito) y limita a 10 resultados.

</details>

---

## Consejos para evitar errores comunes

### Error 1: ORDER BY antes de WHERE
❌ **Incorrecto:**
```sql
SELECT customerName FROM customers ORDER BY customerName WHERE country = 'USA';
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers WHERE country = 'USA' ORDER BY customerName;
```

### Error 2: Olvidar el nombre de la columna en ORDER BY
❌ **Incorrecto:**
```sql
SELECT customerName FROM customers ORDER BY;
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers ORDER BY customerName;
```

### Error 3: Usar alias de columna que no existe
❌ **Incorrecto:**
```sql
SELECT customerName AS "Nombre" FROM customers ORDER BY "Empresa";
```

✅ **Correcto:**
```sql
SELECT customerName AS "Nombre" FROM customers ORDER BY customerName;
```

### Error 4: Confundir ASC y DESC
❌ **Incorrecto (si quieres descendente):**
```sql
SELECT customerName, creditLimit FROM customers ORDER BY creditLimit ASC;
```

✅ **Correcto:**
```sql
SELECT customerName, creditLimit FROM customers ORDER BY creditLimit DESC;
```

### Error 5: ORDER BY LIMIT (orden incorrecto)
❌ **Incorrecto:**
```sql
SELECT customerName FROM customers LIMIT 5 ORDER BY customerName;
```

✅ **Correcto:**
```sql
SELECT customerName FROM customers ORDER BY customerName LIMIT 5;
```

---

## Resumen de conceptos

| Concepto | Descripción | Ejemplo |
|----------|-------------|---------|
| **ORDER BY** | Ordena los resultados por una o más columnas | `ORDER BY customerName` |
| **ASC** | Orden ascendente (A-Z, menor a mayor) | `ORDER BY customerName ASC` |
| **DESC** | Orden descendente (Z-A, mayor a menor) | `ORDER BY creditLimit DESC` |
| **Múltiples columnas** | Ordena por varias columnas en cascada | `ORDER BY country, city` |
| **Diferentes ordenamientos** | Cada columna puede ser ASC o DESC | `ORDER BY country ASC, creditLimit DESC` |
| **Con WHERE** | ORDER BY va después de WHERE | `WHERE ... ORDER BY` |
| **Con LIMIT** | ORDER BY va antes de LIMIT | `ORDER BY ... LIMIT` |
| **Orden de cláusulas** | SELECT -> FROM -> WHERE -> ORDER BY -> LIMIT | Siempre en este orden |

---

## Orden completo de una consulta SQL

Recuerda el orden correcto de las cláusulas:

1. **SELECT** - Qué columnas mostrar
2. **FROM** - De qué tabla obtener los datos
3. **WHERE** - Qué registros filtrar (opcional)
4. **ORDER BY** - Cómo ordenar los resultados (opcional)
5. **LIMIT** - Cuántos registros mostrar (opcional)

**Ejemplo completo:**
```sql
SELECT customerName, country, creditLimit 
FROM customers 
WHERE creditLimit > 50000 
ORDER BY country ASC, creditLimit DESC 
LIMIT 10;
```

---

## ¿Necesitas más ayuda?

Si tienes dudas sobre algún ejercicio o necesitas más práctica, recuerda:
- `ORDER BY` siempre va después de `WHERE` (si existe)
- `ORDER BY` siempre va antes de `LIMIT` (si existe)
- Usa `ASC` para orden ascendente (opcional, es el defecto)
- Usa `DESC` para orden descendente
- Puedes ordenar por múltiples columnas separadas por comas
- Cada columna puede tener su propio `ASC` o `DESC`
- Practica primero con una columna antes de intentar múltiples ordenamientos
